---

version: 1

roles:
    - name: Create host
      description: The ability to add new host
      type: business
      module_name: rbac.roles
      class_name: ModelRole
      any_category: true
      category:
        - ADCM
      apps:
        - label: cm
          models:
            - name: host
              codenames:
                - add

    - name: Create provider
      description: The ability to add new provider
      type: business
      module_name: rbac.roles
      class_name: ModelRole
      any_category: false
      category:
        - ADCM
      apps:
        - label: cm
          models:
            - name: hostprovider
              codenames:
                - add

    - name: Create cluster
      description: The ability to add new cluster
      type: business
      module_name: rbac.roles
      class_name: ModelRole
      any_category: false
      category:
        - ADCM
      apps:
        - label: cm
          models:
            - name: cluster
              codenames:
                - add

    - name: Upload bundle
      description: The ability to upload Bundle
      type: business
      module_name: rbac.roles
      class_name: ModelRole
      any_category: true
      category:
        - ADCM
      apps:
        - label: cm
          models:
            - name: bundle
              codenames:
                - add
            - name: prototype
              codenames:
                - add

    - name: View cluster configurations
      description: The ability to view the cluster configuration page
      type: hidden
      parametrized_by:
        - cluster
      module_name: rbac.roles
      class_name: ObjectRole
      init_params:
        app_name: cm
        model: Cluster
      apps:
        - label: cm
          models:
            - name: cluster
              codenames:
                - view_config_of

    - name: View service configurations
      description: The ability to view the service configuration page
      type: hidden
      parametrized_by:
        - service
      module_name: rbac.roles
      class_name: ObjectRole
      init_params:
        app_name: cm
        model: ClusterObject
      apps:
        - label: cm
          models:
            - name: clusterobject
              codenames:
                - view_config_of

    - name: View component configurations
      description: The ability to view the component configuration page
      type: hidden
      parametrized_by:
        - component
      module_name: rbac.roles
      class_name: ObjectRole
      init_params:
        app_name: cm
        model: ServiceComponent
      apps:
        - label: cm
          models:
            - name: servicecomponent
              codenames:
                - view_config_of

    - name: View provider configurations
      description: The ability to view the provider configuration page
      type: hidden
      parametrized_by:
        - provider
      module_name: rbac.roles
      class_name: ObjectRole
      init_params:
        app_name: cm
        model: HostProvider
      apps:
        - label: cm
          models:
            - name: hostprovider
              codenames:
                - view_config_of

    - name: View host configurations
      description: The ability to view the host configuration page
      type: hidden
      parametrized_by:
        - host
      module_name: rbac.roles
      class_name: ObjectRole
      init_params:
        app_name: cm
        model: Host
      apps:
        - label: cm
          models:
            - name: host
              codenames:
                - view_config_of

    - name: View config endpoints
      description: The ability to view list of all configs separatly
      type: hidden
      module_name: rbac.roles
      class_name: ModelRole
      apps:
      - label: cm
        models:
          - name: objectconfig
            codenames:
              - view
          - name: configlog
            codenames:
              - view

    - name: View application configurations
      description: The ability to view the configuration of cluster, service and component.
      type: business
      module_name: rbac.roles
      class_name: ParentRole
      any_category: true
      parametrized_by:
        - cluster
        - service
        - component
      category:
        - ADCM
      child:
        - View cluster configurations
        - View service configurations
        - View component configurations
        - View config endpoints

    - name: View infrastructure configurations
      description: The ability to view configuration of provider and host.
      type: business
      module_name: rbac.roles
      class_name: ParentRole
      any_category: true
      parametrized_by:
        - provider
        - host
      category:
        - ADCM
      child:
        - View provider configurations
        - View host configurations
        - View config endpoints


    - name: Edit cluster configurations
      description: The ability to change and add new cluster configuration
      type: hidden
      parametrized_by:
        - cluster
      module_name: rbac.roles
      class_name: ObjectRole
      init_params:
        app_name: cm
        model: Cluster
      apps:
        - label: cm
          models:
            - name: cluster
              codenames:
                - view_config_of
                - change_config_of

    - name: Edit service configurations
      description: The ability to change and add new service configuration
      type: hidden
      parametrized_by:
        - service
      module_name: rbac.roles
      class_name: ObjectRole
      init_params:
        app_name: cm
        model: ClusterObject
      apps:
        - label: cm
          models:
            - name: clusterobject
              codenames:
                - view_config_of
                - change_config_of

    - name: Edit component configurations
      description: The ability to change and add new component configuration
      type: hidden
      parametrized_by:
        - component
      module_name: rbac.roles
      class_name: ObjectRole
      init_params:
        app_name: cm
        model: ServiceComponent
      apps:
        - label: cm
          models:
            - name: servicecomponent
              codenames:
                - view_config_of
                - change_config_of

    - name: Edit provider configurations
      description: The ability to change and add new provider configuration
      type: hidden
      parametrized_by:
        - provider
      module_name: rbac.roles
      class_name: ObjectRole
      init_params:
        app_name: cm
        model: HostProvider
      apps:
        - label: cm
          models:
            - name: hostprovider
              codenames:
                - view_config_of
                - change_config_of

    - name: Edit host configurations
      description: The ability to change and add new host configuration
      type: hidden
      parametrized_by:
        - host
      module_name: rbac.roles
      class_name: ObjectRole
      init_params:
        app_name: cm
        model: Host
      apps:
        - label: cm
          models:
            - name: host
              codenames:
                - view_config_of
                - change_config_of

    - name: Edit config endpoints
      description: The ability to edit list of all configs separatly
      type: hidden
      module_name: rbac.roles
      class_name: ModelRole
      apps:
        - label: cm
          models:
            - name: objectconfig
              codenames:
                - view
                - change
            - name: configlog
              codenames:
                - view
                - change

    - name: Edit application configurations
      description: The ability to edit the configuration of cluster, service and component.
      type: business
      module_name: rbac.roles
      class_name: ParentRole
      any_category: true
      parametrized_by:
        - cluster
        - service
        - component
      category:
        - ADCM
      child:
        - Edit cluster configurations
        - Edit service configurations
        - Edit component configurations
        - Edit config endpoints

    - name: Edit infrastructure configurations
      description: The ability to edit the configuration of provider and host
      type: business
      module_name: rbac.roles
      class_name: ParentRole
      any_category: true
      parametrized_by:
        - provider
        - host
      category:
        - ADCM
      child:
        - Edit provider configurations
        - Edit host configurations
        - Edit config endpoints

    - name: View cluster imports
      description: The ability to view the cluster import page
      type: hidden
      parametrized_by:
        - cluster
      module_name: rbac.roles
      class_name: ObjectRole
      init_params:
        app_name: cm
        model: Cluster
      apps:
        - label: cm
          models:
            - name: cluster
              codenames:
                - view_import_of

    - name: View service imports
      description: The ability to view the service import page
      type: hidden
      parametrized_by:
        - service
      module_name: rbac.roles
      class_name: ObjectRole
      init_params:
        app_name: cm
        model: ClusterObject
      apps:
        - label: cm
          models:
            - name: clusterobject
              codenames:
                - view_import_of

    - name: View imports
      description: The ability to view all imports page on cluster and service
      type: business
      module_name: rbac.roles
      class_name: ParentRole
      any_category: true
      category:
        - ADCM
      child:
        - View cluster imports
        - View service imports

    - name: Manage cluster imports
      description: The ability to change cluster imports
      type: hidden
      parametrized_by:
        - cluster
      module_name: rbac.roles
      class_name: ObjectRole
      init_params:
        app_name: cm
        model: Cluster
      apps:
        - label: cm
          models:
            - name: cluster
              codenames:
                - view_import_of
                - change_import_of

    - name: Manage service imports
      description: The ability to change service imports
      type: hidden
      parametrized_by:
        - service
      module_name: rbac.roles
      class_name: ObjectRole
      init_params:
        app_name: cm
        model: ClusterObject
      apps:
        - label: cm
          models:
            - name: clusterobject
              codenames:
                - view_import_of
                - change_import_of

    - name: Manage imports
      description: The ability to manage all imports page on cluster and service
      type: business
      module_name: rbac.roles
      class_name: ParentRole
      any_category: true
      category:
        - ADCM
      child:
        - Manage cluster imports
        - Manage service imports

    - name: Add service
      description: The ability to add service to cluster
      type: business
      parametrized_by:
        - cluster
      module_name: rbac.roles
      class_name: ObjectRole
      init_params:
        app_name: cm
        model: Cluster
      any_category: true
      category:
        - ADCM
      apps:
        - label: cm
          models:
            - name: cluster
              codenames:
                - add_service_to

    - name: Remove service
      description: The ability to remove service from cluster
      type: business
      parametrized_by:
        - service
      module_name: rbac.roles
      class_name: ObjectRole
      init_params:
        app_name: cm
        model: ClusterObject
      any_category: true
      category:
        - ADCM
      apps:
        - label: cm
          models:
            - name: clusterobject
              codenames:
                - delete

    - name: Remove hosts
      description: The ability to remove hosts
      type: business
      parametrized_by:
        - host
      module_name: rbac.roles
      class_name: ObjectRole
      init_params:
        app_name: cm
        model: Host
      any_category: true
      category:
        - ADCM
      apps:
        - label: cm
          models:
            - name: host
              codenames:
                - delete

    - name: Map hosts
      display_name: Add hosts to the Cluster
      description: The ability to map hosts to the Cluster
      type: business
      parametrized_by:
        - cluster
      module_name: rbac.roles
      class_name: ObjectRole
      init_params:
        app_name: cm
        model: Cluster
      any_category: true
      category:
        - ADCM
      apps:
        - label: cm
          models:
            - name: cluster
              codenames:
                - map_host_to

    - name: Unmap hosts
      display_name: Remove hosts from the Cluster
      description: The ability to unmap hosts to the Cluster
      type: business
      parametrized_by:
        - cluster
      module_name: rbac.roles
      class_name: ObjectRole
      init_params:
        app_name: cm
        model: Cluster
      any_category: true
      category:
        - ADCM
      apps:
        - label: cm
          models:
            - name: cluster
              codenames:
                - unmap_host_from

    - name: View host-components
      description: The ability to view cluster's host-component page
      type: business
      parametrized_by:
        - cluster
      module_name: rbac.roles
      class_name: ObjectRole
      init_params:
        app_name: cm
        model: Cluster
      any_category: true
      category:
        - ADCM
      apps:
        - label: cm
          models:
            - name: cluster
              codenames:
                - view_host_components_of

    - name: Edit host-components
      description: The ability to edit cluster's host-component page
      type: business
      parametrized_by:
        - cluster
      module_name: rbac.roles
      class_name: ObjectRole
      init_params:
        app_name: cm
        model: Cluster
      any_category: true
      category:
        - ADCM
      apps:
        - label: cm
          models:
            - name: cluster
              codenames:
                - edit_host_components_of

    - name: Upgrade application bundle
      description: Update the cluster bundle
      type: business
      parametrized_by:
        - cluster
      module_name: rbac.roles
      class_name: ObjectRole
      init_params:
        app_name: cm
        model: Cluster
      apps:
        - label: cm
          models:
            - name: cluster
              codenames:
                - view_upgrade_of
                - do_upgrade_of

    - name: Upgrade infrastructure bundle
      description: Update the provider bundle
      type: business
      parametrized_by:
        - provider
      module_name: rbac.roles
      class_name: ObjectRole
      init_params:
        app_name: cm
        model: HostProvider
      apps:
        - label: cm
          models:
            - name: hostprovider
              codenames:
                - view_upgrade_of
                - do_upgrade_of

    - name: Remove cluster
      description: The ability to remove cluster
      type: business
      parametrized_by:
        - cluster
      module_name: rbac.roles
      class_name: ObjectRole
      init_params:
        app_name: cm
        model: Cluster
      any_category: false
      category:
        - ADCM
      apps:
        - label: cm
          models:
            - name: cluster
              codenames:
                - delete

    - name: Remove provider
      description: The ability to remove provider
      type: business
      parametrized_by:
        - provider
      module_name: rbac.roles
      class_name: ObjectRole
      init_params:
        app_name: cm
        model: HostProvider
      any_category: false
      category:
        - ADCM
      apps:
        - label: cm
          models:
            - name: hostprovider
              codenames:
                - delete

    - name: Remove bundle
      description: The ability to remove bundle
      type: business
      module_name: rbac.roles
      class_name: ModelRole
      any_category: true
      category:
        - ADCM
      apps:
        - label: cm
          models:
            - name: bundle
              codenames:
                - delete

    - name: View ADCM settings
      description: View purely adcm config
      type: business
      module_name: rbac.roles
      class_name: ModelRole
      any_category: false
      category:
        - ADCM
      apps:
        - label: cm
          models:
            - name: adcm
              codenames:
                - view_config_of

    - name: Edit ADCM settings
      description: Edit purely adcm config
      type: business
      module_name: rbac.roles
      class_name: ModelRole
      any_category: false
      category:
        - ADCM
      apps:
        - label: cm
          models:
            - name: adcm
              codenames:
                - change_config_of

    - name: View users
      description: The ability to view Users page
      type: business
      module_name: rbac.roles
      class_name: ModelRole
      any_category: false
      category:
        - ADCM
      apps:
        - label: rbac
          models:
            - name: user
              codenames:
                - view

    - name: Create user
      description: The ability to create new user
      type: business
      module_name: rbac.roles
      class_name: ModelRole
      any_category: false
      category:
        - ADCM
      apps:
        - label: rbac
          models:
            - name: user
              codenames:
                - add

    - name: Edit user
      description: The ability to change information about existed user
      type: business
      module_name: rbac.roles
      class_name: ModelRole
      any_category: false
      category:
        - ADCM
      apps:
        - label: rbac
          models:
            - name: user
              codenames:
                - change

    - name: Remove user
      description: The ability to delete existed user
      type: business
      module_name: rbac.roles
      class_name: ModelRole
      any_category: false
      category:
        - ADCM
      apps:
        - label: rbac
          models:
            - name: user
              codenames:
                - delete

    - name: View roles
      description: The ability to view roles page
      type: business
      module_name: rbac.roles
      class_name: ModelRole
      any_category: false
      category:
        - ADCM
      apps:
        - label: rbac
          models:
            - name: role
              codenames:
                - view

    - name: Create custom role
      description: The ability to create new role
      type: business
      module_name: rbac.roles
      class_name: ModelRole
      any_category: false
      category:
        - ADCM
      apps:
        - label: rbac
          models:
            - name: role
              codenames:
                - add

    - name: Edit role
      description: The ability to change your custom role
      type: business
      module_name: rbac.roles
      class_name: ModelRole
      any_category: false
      category:
        - ADCM
      apps:
        - label: rbac
          models:
            - name: role
              codenames:
                - change

    - name: Remove roles
      description: The ability to delete custom roles
      type: business
      module_name: rbac.roles
      class_name: ModelRole
      any_category: false
      category:
        - ADCM
      apps:
        - label: rbac
          models:
            - name: role
              codenames:
                - delete

    - name: View group
      description: The ability to view group page
      type: business
      module_name: rbac.roles
      class_name: ModelRole
      any_category: false
      category:
        - ADCM
      apps:
        - label: rbac
          models:
            - name: group
              codenames:
                - view

    - name: Create group
      description: The ability to create new group
      type: business
      module_name: rbac.roles
      class_name: ModelRole
      any_category: false
      category:
        - ADCM
      apps:
        - label: rbac
          models:
            - name: group
              codenames:
                - add

    - name: Edit group
      description: The ability to change group
      type: business
      module_name: rbac.roles
      class_name: ModelRole
      any_category: false
      category:
        - ADCM
      apps:
        - label: rbac
          models:
            - name: group
              codenames:
                - change

    - name: Remove group
      description: The ability to delete roles
      type: business
      module_name: rbac.roles
      class_name: ModelRole
      any_category: false
      category:
        - ADCM
      apps:
        - label: rbac
          models:
            - name: group
              codenames:
                - delete

    - name: View policy
      description: The ability to policy group page
      type: business
      module_name: rbac.roles
      class_name: ModelRole
      any_category: false
      category:
        - ADCM
      apps:
        - label: rbac
          models:
            - name: policy
              codenames:
                - view

    - name: Create policy
      description: The ability to create new policy
      type: business
      module_name: rbac.roles
      class_name: ModelRole
      any_category: false
      category:
        - ADCM
      apps:
        - label: rbac
          models:
            - name: policy
              codenames:
                - add

    - name: Edit policy
      description: The ability to change policies
      type: business
      module_name: rbac.roles
      class_name: ModelRole
      any_category: false
      category:
        - ADCM
      apps:
        - label: rbac
          models:
            - name: policy
              codenames:
                - change

    - name: Remove policy
      description: The ability to delete policies
      type: business
      module_name: rbac.roles
      class_name: ModelRole
      any_category: false
      category:
        - ADCM
      apps:
        - label: rbac
          models:
            - name: policy
              codenames:
                - delete

    - name: Base role
      description: Default list of view permissions for all objects
      type: hidden
      module_name: rbac.roles
      class_name: ParentRole
      child:
        - Get ADCM object
        - Get provider
        - Get cluster
        - Get host
        - Get service
        - Get component
        - Get task and jobs
        - Get stack
        - Get concerns

    - name: Get ADCM object
      description: Read access to ADCM
      type: hidden
      module_name: rbac.roles
      class_name: ModelRole
      apps:
        - label: cm
          models:
            - name: adcm
              codenames:
                - view

    - name: Get provider
      description: Read access to Provider
      type: hidden
      module_name: rbac.roles
      class_name: ModelRole
      apps:
        - label: cm
          models:
            - name: hostprovider
              codenames:
                - view

    - name: Get cluster
      description: Read access to Clusters
      type: hidden
      module_name: rbac.roles
      class_name: ModelRole
      apps:
        - label: cm
          models:
            - name: cluster
              codenames:
                - view

    - name: Get host
      description: Read access to Host
      type: hidden
      module_name: rbac.roles
      class_name: ModelRole
      apps:
        - label: cm
          models:
            - name: host
              codenames:
                - view

    - name: Get service
      description: Read access to Service
      type: hidden
      module_name: rbac.roles
      class_name: ModelRole
      apps:
        - label: cm
          models:
            - name: clusterobject
              codenames:
                - view

    - name: Get component
      description: Read access to Component
      type: hidden
      module_name: rbac.roles
      class_name: ModelRole
      apps:
        - label: cm
          models:
            - name: servicecomponent
              codenames:
                - view

    - name: Get task and jobs
      description: Read access to job execution information
      type: hidden
      module_name: rbac.roles
      class_name: ModelRole
      apps:
        - label: cm
          models:
            - name: tasklog
              codenames:
                - view
            - name: joblog
              codenames:
                - view
            - name: logstorage
              codenames:
                - view

    - name: Get stack
      description: Read access to all prototypes
      type: hidden
      module_name: rbac.roles
      class_name: ModelRole
      apps:
        - label: cm
          models:
            - name: prototype
              codenames:
                - view
            - name: bundle
              codenames:
                - view
            - name: action
              codenames:
                - view
            - name: prototypeconfig
              codenames:
                - view
            - name: prototypeexport
              codenames:
                - view
            - name: prototypeimport
              codenames:
                - view

    - name: Get concerns
      description: Read access to all concerns
      type: hidden
      module_name: rbac.roles
      class_name: ModelRole
      apps:
        - label: cm
          models:
            - name: concernitem
              codenames:
                - view
            - name: bundle
              codenames:
                - view
            - name: action
              codenames:
                - view

    - name: ADCM User
      type: role
      module_name: rbac.roles
      class_name: ParentRole
      child:
        - Base role
        - View host-components
        - View application configurations
        - View infrastructure configurations
        - View imports

    - name: Service Administrator
      type: role
      parametrized_by:
        - service
      init_params:
        app_name: cm
        model: ClusterObject
      module_name: rbac.roles
      class_name: ParentRole
      child:
        - ADCM User
        - Edit application configurations
        - Manage imports

    - name: Cluster Administrator
      type: role
      parametrized_by:
        - cluster
      init_params:
        app_name: cm
        model: Cluster
      module_name: rbac.roles
      class_name: ParentRole
      child:
        - Service Administrator
        - Edit host-components
        - Add service
        - Remove service
        - Remove hosts
        - Map hosts
        - Unmap hosts
        - Upgrade application bundle
        - Create host
        - Upload bundle
        - Remove bundle

    - name: Provider Administrator
      type: role
      parametrized_by:
        - provider
        - host
      init_params:
        app_name: cm
        model: Cluster
      module_name: rbac.roles
      class_name: ParentRole
      child:
        - Edit infrastructure configurations
        - Upgrade infrastructure bundle
        - Create host
        - Remove hosts
        - Upload bundle
        - Remove bundle

    - name: ADCM Administrator
      type: role
      module_name: rbac.roles
      class_name: ParentRole
      child:
        - Cluster Administrator
        - Create provider
        - Remove provider
        - Create cluster
        - Remove cluster
        - View ADCM settings
        - Edit ADCM settings
        - View users
        - Create user
        - Remove user
        - Edit user
        - View roles
        - Create custom role
        - Remove roles
        - Edit role
        - View group
        - Create group
        - Remove group
        - Edit group
        - View policy
        - Create policy
        - Remove policy
        - Edit policy
